<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>ç¾é£Ÿå®¶ã•ã‚“</title>
  <link rel="stylesheet" href="style_sp.css" />
</head>
<body>
  <div class="top-bar">ç¾é£Ÿå®¶ã•ã‚“</div>

  <div class="profile-section">
    <img id="profileIcon" class="profile-img" src="img/user-icon.png" alt="ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«" />
    <div class="user-name" id="userName">ã€‡ã€‡ã•ã‚“</div>
  </div>

  <div class="card">
    <div class="card-rank">æœ¬æ—¥ã®æ‘‚å–ã‚«ãƒ­ãƒªãƒ¼</div>
    <div class="card-value"><span id="currentCalorie">0</span> kcal</div>
    <div class="card-sub">ç›®æ¨™ã¾ã§ã‚ã¨ <span id="remainingCalorie">--</span> kcal</div>
  </div>

  <div class="button-grid">
    <div class="grid-button" onclick="switchPage('meal')">ğŸ“·<br>é£Ÿäº‹è¨˜éŒ²</div>
    <div class="grid-button" onclick="switchPage('fridge')">ğŸ§Š<br>å†·è”µåº«ç®¡ç†</div>
    <div class="grid-button" onclick="switchPage('question')">ğŸ§ <br>è³ªå•ææ¡ˆ</div>
    <div class="grid-button" onclick="switchPage('nutrients')">ğŸ‘¥<br>æ „é¤Šåˆ†æ</div>
    <div class="grid-button" onclick="switchPage('akinator')">ğŸ½ï¸<br>AIçŒ®ç«‹</div>
  </div>

  <script>
    function switchPage(name) {
      window.location.href = `pages/${name}/index.html`;
    }

    function loadUserSettings() {
      const userName = localStorage.getItem("username") || "ç¾é£Ÿå®¶ã•ã‚“";
      document.getElementById("userName").textContent = `ã“ã‚“ã«ã¡ã¯ã€${userName}ï¼`;

      const icon = localStorage.getItem("userIcon");
      if (icon) document.getElementById("profileIcon").src = icon;
    }

    function loadCalorieInfo() {
      const goal = parseInt(localStorage.getItem("calorieGoal")) || 1580;
      const today = new Date().toLocaleDateString();
      const current = parseInt(localStorage.getItem("calorie_" + today)) || 0;
      document.getElementById("currentCalorie").textContent = current;
      document.getElementById("remainingCalorie").textContent = Math.max(0, goal - current);
    }

    window.onload = function () {
      loadUserSettings();
      loadCalorieInfo();
    };
  </script>
</body>
</html>
