:root{
  --bg:#0f172a; --card:#111827; --ink:#e5e7eb; --muted:#9ca3af; --line:#1f2937;
  --brand:#0ea5e9; --ok:#22c55e; --p:#34d399; --f:#fbbf24; --c:#60a5fa;
}

*{ box-sizing:border-box; -webkit-tap-highlight-color: transparent; }
body{
  margin:0; background:var(--bg); color:var(--ink);
  font-family:Poppins,system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial,sans-serif;
}

.page{ max-width:820px; margin:0 auto; padding:14px 12px 40px; }

/* ヘッダー（スマホ最適化） */
.header{
  position:sticky; top:0; z-index:10;
  display:flex; align-items:center; justify-content:space-between; gap:8px;
  padding:10px 6px; margin: -14px -12px 8px;
  background:linear-gradient(180deg, rgba(15,23,42,.95), rgba(15,23,42,.85));
  backdrop-filter: blur(8px);
  border-bottom:1px solid var(--line);
}
.header h1{ margin:0; font-size:18px; }
.back{ color:#ffbb54; text-decoration:none; font-weight:700 }
.ghost{ background:transparent; color:#cbd5e1; border:1px solid var(--line); border-radius:10px; padding:8px 12px; cursor:pointer }
.ghost.small{ padding:6px 10px; font-size:12px }

/* 範囲チップ */
.nav{ display:flex; gap:8px; flex-wrap:wrap; align-items:center; margin-top:6px }
.chip{
  border:1px solid var(--line); background:#0b1220; color:#cbd5e1; border-radius:999px;
  padding:8px 12px; font-size:13px; cursor:pointer; user-select:none
}
.chip.active{ border-color:var(--brand); color:#e6f6ff }
.spacer{ flex:1 }

/* 合計サマリー */
.summary-cards{
  margin-top:12px; display:grid; gap:10px;
  grid-template-columns:repeat(2, minmax(0, 1fr));
}
@media (min-width:560px){
  .summary-cards{ grid-template-columns:repeat(4, minmax(0, 1fr)); }
}
.summary-cards .card{ background:var(--card); border:1px solid var(--line); border-radius:14px; padding:12px }
.summary-cards .label{ color:#cbd5e1; font-size:12px }
.summary-cards .value{ font-weight:800; font-size:20px; margin-top:4px }

/* 日別一覧 */
.days-root{ margin-top:14px; display:grid; gap:10px }
.muted{ color:var(--muted); font-size:13px }

details.day{
  background:var(--card); border:1px solid var(--line); border-radius:14px; padding:8px 10px
}
.day-summary{ display:flex; align-items:center; gap:10px; cursor:pointer }
.day-summary .date{ font-weight:800 }
.day-summary .chips{ display:flex; gap:6px; flex-wrap:wrap }
.day-summary .chip{ font-size:12px; padding:4px 8px }
.day-summary .chip.k{ background:#0e3a52; border-color:#144b69 }
.day-summary .chip.p{ background:#0d3b2e; border-color:#11523e }
.day-summary .chip.f{ background:#4a3608; border-color:#644a0f }
.day-summary .chip.c{ background:#0a274e; border-color:#123868 }

.meals{ margin-top:8px; display:grid; gap:10px }
details.meal{
  background:#0b1220; border:1px solid var(--line); border-radius:12px; padding:8px
}
.meal-summary{
  display:grid; grid-template-columns:auto 1fr; gap:10px; align-items:center; cursor:pointer
}
.thumb{ width:72px; height:54px; object-fit:cover; border-radius:8px; background:#0a1324 }
.thumb.ph{ background:#0a1324; border:1px dashed #213047 }
.meta{ display:flex; flex-direction:column; gap:4px }
.meta .title{ font-weight:700 }
.meta .badges{ display:flex; gap:6px; flex-wrap:wrap; font-size:12px }
.meta .badges .kcal{ background:var(--brand); color:#031422; border-radius:999px; padding:2px 8px; font-weight:800 }
.meta .badges .p{ background:#0d3b2e; border:1px solid #11523e; border-radius:999px; padding:2px 8px }
.meta .badges .f{ background:#4a3608; border:1px solid #644a0f; border-radius:999px; padding:2px 8px }
.meta .badges .c{ background:#0a274e; border:1px solid #123868; border-radius:999px; padding:2px 8px }
.meta .comment{ color:#cbd5e1; font-size:12px }

details.ingredients{ margin-top:8px }
details.ingredients > summary{ cursor:pointer; color:#cbd5e1; font-weight:600 }
.table-wrap{ overflow:auto; border:1px solid var(--line); border-radius:10px; margin-top:6px }
table{ width:100%; border-collapse:collapse; font-size:12px; background:#0b1220 }
th,td{ padding:6px 8px; border-bottom:1px solid var(--line) }
thead th{ text-align:left; color:#cbd5e1; background:#0e1626 }
.num{ text-align:right }
tr:last-child td{ border-bottom:none }

.footer{ margin-top:20px; text-align:center }
.footer .back{ color:#ffbb54; text-decoration:none }
