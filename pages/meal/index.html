<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>美食家さん｜食事記録（Meal）</title>

  <!-- 外部CSS -->
  <link rel="stylesheet" href="./style.css" />
</head>
<body>
  <div class="meal-app-container">
    <div class="back-button" style="margin-bottom:8px;">
      <a href="/index_sp.html">← ホームへ戻る</a>
    </div>

    <h1>食事記録</h1>

    <!-- アップロード＆操作エリア -->
    <section class="meal-upload-area" aria-label="食事の追加">
      <div class="actions-row">
        <label for="photoInput" class="file-label">
          <span class="file-btn">写真を選ぶ</span>
        </label>
        <input id="photoInput" type="file" accept="image/*" capture="environment" style="display:none" />
        <div id="photoPreview" class="photo-preview" aria-live="polite"></div>
      </div>

      <div class="actions-row">
        <label for="starsInput">評価</label>
        <select id="starsInput" name="stars">
          <option value="1">★☆☆☆☆（1）</option>
          <option value="2">★★☆☆☆（2）</option>
          <option value="3">★★★☆☆（3）</option>
          <option value="4" selected>★★★★☆（4）</option>
          <option value="5">★★★★★（5）</option>
        </select>

        <input id="commentInput" type="text" inputmode="text" placeholder="感想やメモ（任意）" style="flex:1; min-width:220px;" />

        <button id="addMealBtn" type="button">記録する</button>
        <button id="resetBtn" class="danger-btn" type="button" title="全削除">全て削除</button>
      </div>

      <p id="helperText" class="hint" aria-live="polite"></p>
    </section>

    <!-- 日ごとの記録 -->
    <div id="mealsByDay" aria-label="日別の食事記録一覧"></div>
  </div>

  <!-- 編集用モーダル -->
  <div id="modalOverlay" class="modal-overlay" style="display:none;">
    <div class="modal-content" role="dialog" aria-modal="true" aria-labelledby="modalTitle">
      <span id="closeModal" class="close-modal" aria-label="閉じる">×</span>

      <img id="modalPhoto" class="modal-photo" alt="記録画像のプレビュー" />

      <div class="modal-actions">
        <label for="modalFoodInput">料理名</label>
        <input id="modalFoodInput" type="text" placeholder="料理名を編集" style="flex:1; min-width:160px;" />

        <label for="modalStarsInput">評価</label>
        <select id="modalStarsInput" name="modalStars">
          <option value="1">1</option>
          <option value="2">2</option>
          <option value="3" selected>3</option>
          <option value="4">4</option>
          <option value="5">5</option>
        </select>

        <input id="modalCommentInput" type="text" placeholder="コメントを編集" style="flex:1; min-width:200px;" />
        <button id="saveModalBtn" class="save-btn" type="button">保存</button>
      </div>
    </div>
  </div>

  <!-- 外部JS（必ず script.js を同じフォルダに配置し、冒頭の API_URL を最新 ngrok に更新） -->
  <script src="./script.js" defer></script>
</body>
</html>
