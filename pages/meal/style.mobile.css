:root{
  --bg:#0b1220;
  --card:#101826;
  --ink:#e5e7eb;
  --muted:#9ca3af;
  --line:#1f2a3d;
  --brand:#0ea5e9;
  --ok:#22c55e;
}

*{ box-sizing:border-box; -webkit-tap-highlight-color: transparent; }
html,body{ height:100% }
body{
  margin:0; background:var(--bg); color:var(--ink);
  font-family:"Poppins", system-ui, -apple-system, "Segoe UI", Roboto, Helvetica, Arial, sans-serif;
}
.app{ max-width:720px; margin:0 auto; padding:12px 12px 72px; }

/* ===== Topbar ===== */
.topbar{
  display:flex; align-items:center; justify-content:space-between;
  position:sticky; top:0; z-index:10;
  background:linear-gradient(180deg, rgba(11,18,32,.95), rgba(11,18,32,.85));
  -webkit-backdrop-filter: blur(8px); backdrop-filter: blur(8px);
  padding:10px 6px; border-bottom:1px solid var(--line);
}
.topbar h1{ margin:0; font-size:18px }
.topbar .back{ color:#ffbb54; text-decoration:none; font-weight:700 }
.topbar-pad{ width:48px; }

/* ===== 入力エリア ===== */
.input-card{
  background:var(--card); border:1px solid var(--line);
  border-radius:14px; padding:12px; box-shadow: 0 8px 24px rgba(0,0,0,.25);
}
.row{ display:flex; gap:8px; align-items:center; }
.row.compact{ margin-top:8px }

/* ボタン：横並び・改行防止 */
.file-buttons{ display:flex; gap:8px; margin-bottom:10px; }
.file input{ display:none }
.file span{
  display:inline-flex; align-items:center; justify-content:center;
  padding:10px; border-radius:10px; font-weight:700; cursor:pointer;
  background:var(--brand); color:#031422; flex:1; min-height:40px;
  overflow:hidden; text-overflow:ellipsis;
}
.file.ghost span{
  background:#1b2636; color:#cbd5e1; border:1px solid var(--line);
}
.nowrap{ white-space:nowrap; }

/* プレビュー */
.preview{ margin-top:8px; display:flex; gap:8px; flex-wrap:wrap }
.preview img{
  width:100%; border-radius:12px; display:block; object-fit:cover;
  box-shadow:0 4px 16px rgba(0,0,0,.35);
}

/* 入力 */
.stars{ display:flex; align-items:center; gap:6px; }
.stars input{ width:64px }
input[type="number"], input[type="text"]{
  background:#0a1424; color:var(--ink);
  border:1px solid var(--line); border-radius:12px;
  padding:10px 12px; width:100%;
}
input::placeholder{ color:#6b7280 }

/* アクション */
.primary{
  width:100%; margin-top:10px;
  background:var(--ok); color:#08110a; border:none;
  border-radius:12px; padding:12px 14px; font-weight:800;
}
.ghost.danger-ghost{
  width:100%; margin-top:8px;
  color:#fda4a4; border:1px solid #7b2b2b; background:#1b2636;
}
.hint{ margin:.5rem 0 0; color:var(--muted); font-size:12px }

/* ===== Days / Cards ===== */
.days{ display:grid; gap:10px; margin-top:12px }
.day{
  background:var(--card); border:1px solid var(--line);
  border-radius:14px; padding:10px;
}
.day-title{ margin:0 0 8px; font-size:14px; color:#e8eaed }

/* 3列グリッド（狭い画面は2列） */
.cards{
  display:grid; gap:8px; grid-template-columns:repeat(3, 1fr);
}
@media (max-width:380px){ .cards{ grid-template-columns:repeat(2, 1fr); } }

.card{
  background:#0a1424; border:1px solid var(--line);
  border-radius:12px; overflow:hidden; cursor:pointer; text-align:center;
}
.card .img{
  width:100%; aspect-ratio:1/1; object-fit:cover; display:block;
}
.meta{ padding:6px; }
.title{ font-weight:700; font-size:13px; margin-bottom:4px; }
.kcal-badge{
  display:inline-block; background:var(--brand); color:#031422;
  border-radius:999px; padding:2px 8px; font-weight:800; font-size:12px;
}

/* ===== モーダル (bottom sheet) ===== */
.modal{
  position:fixed; inset:0; background:rgba(0,0,0,.6);
  display:flex; align-items:flex-end; justify-content:center; z-index:100;
}
.modal[hidden]{ display:none }
.sheet{
  width:100%; max-width:720px; background:var(--card); color:var(--ink);
  border-radius:16px 16px 0 0; border:1px solid var(--line);
  overflow:hidden; animation:slideUp .25s ease-out;
}
@keyframes slideUp{ from{ transform:translateY(100%);} to{ transform:translateY(0);} }
.sheet-head{ display:flex; justify-content:flex-end; padding:8px; }
.icon-btn{ background:transparent; border:none; color:var(--ink); font-size:20px; cursor:pointer; }
.sheet-photo{ width:100%; max-height:50vh; object-fit:contain; background:#000; }
.sheet-body{ padding:12px; }
.modal-title{ margin:8px 0 4px; font-size:16px; font-weight:800; }
.modal-kcal{ font-weight:800; margin-bottom:4px; }
.modal-pfc{ color:#cbd5e1; margin-bottom:6px; }
.modal-comment{ color:#cbd5e1; margin-bottom:10px; }

details.ing{ margin-top:6px }
details.ing summary{
  list-style:none; cursor:pointer; color:#cbd5e1; font-weight:600;
}
details.ing summary::-webkit-details-marker{ display:none }
.table{
  width:100%; border-collapse:collapse; font-size:12px; margin-top:6px;
  background:#081120; border:1px solid var(--line); border-radius:10px; overflow:hidden;
}
.table th, .table td{ padding:8px; border-bottom:1px solid var(--line); }
.table th{ text-align:left; color:#cbd5e1; background:#0e1727 }
.table .num{ text-align:right }
