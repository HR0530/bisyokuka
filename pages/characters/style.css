:root{
  --bg:#0f172a; --card:#111827; --ink:#e5e7eb;
  --line:#1f2937; --muted:#9ca3af; --brand:#0ea5e9; --accent:#f59e0b; --ok:#22c55e;
}
*{box-sizing:border-box}
html,body{height:100%}
body{
  margin:0; background:var(--bg); color:var(--ink);
  font-family:system-ui,-apple-system,"Segoe UI",Roboto,Helvetica,Arial;
}
.wrap{max-width:1000px;margin:0 auto;padding:16px}

.topbar{
  display:grid; grid-template-columns:120px 1fr 120px; gap:8px;
  align-items:center; margin-bottom:12px;
}
.topbar h1{margin:0;text-align:center;font-size:20px}

.btn{
  background:var(--accent);color:#111;padding:8px 10px;border:none;border-radius:10px;
  font-weight:700;text-decoration:none;text-align:center;display:inline-block;cursor:pointer
}
.btn.ghost{background:var(--brand);color:#031422}
.btn.tiny{padding:6px 10px;border-radius:8px;font-size:12px}

.gauge-card{
  background:var(--card);border:1px solid var(--line);border-radius:14px;padding:12px;
  margin-bottom:12px; box-shadow:0 8px 24px rgba(0,0,0,.25);
}
.gauge-head{display:flex;justify-content:space-between;align-items:end;margin-bottom:8px}
.gauge-head .title{font-weight:800}
.gauge-head .pct{font-weight:900}
.gauge-rail{height:14px;background:#0b1220;border:1px solid var(--line);border-radius:999px;overflow:hidden}
.gauge-bar{height:100%;background:linear-gradient(90deg,#34d399,#0ea5e9);width:0%}
.note{color:var(--muted);font-size:12px;margin-top:6px}

.stage{
  background:var(--card);border:1px solid var(--line);border-radius:14px;
  padding:12px; display:grid;place-items:center; position:relative;
  box-shadow:0 8px 24px rgba(0,0,0,.25); margin-bottom:12px;
}
#charCanvas{width:420px;max-width:90vw;height:auto;image-rendering:pixelated}
.speech{
  position:absolute; top:12px; left:50%; transform:translateX(-50%);
  background:#111; color:#fff; border:1px solid #333; padding:8px 10px; border-radius:10px; font-size:14px;
  opacity:.9; max-width:min(80ch,86vw);
}

.quests{
  background:var(--card);border:1px solid var(--line);border-radius:14px;padding:10px;
  display:grid; grid-template-columns:1fr; gap:8px;
}
.q{
  display:grid; grid-template-columns:1fr auto; gap:6px; align-items:center;
  background:#0b1220;border:1px solid var(--line);border-radius:12px;padding:8px 10px;
}
.q .name{font-weight:700;font-size:14px}
.q .mini{grid-column:1/2;color:var(--muted);font-size:11px}
.q .act{grid-column:2/3}
